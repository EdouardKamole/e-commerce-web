"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[28098],{552341:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(149722);let r=()=>{let e=(0,t.Z)(),s=!!e.isAuth&&e.isPartner;return s}},354500:(e,s,a)=>{a.d(s,{Oz:()=>t,mo:()=>n,nt:()=>i,v8:()=>r});let t={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE"},r="BUSINESS_PANEL",i="ASSET_PANEL",n=500},368552:(e,s,a)=>{a.d(s,{FE:()=>N,lG:()=>f,d9:()=>I});var t=a(667294),r=a(616550),i=a(552341),n=a(516018),u=a(340523),l=a(149722),c=a(953565);let d=()=>{let e=(0,l.Z)(),{checkExperiment:s}=(0,u.F)(),a=(0,i.Z)()&&s("web_m10n_business_reporting_business_entity_service").anyEnabled,[r,d]=(0,t.useState)({isReady:!1}),o=(0,t.useCallback)(async({entityId:e,actingBusinessId:s,favorites:t})=>{a&&(await (0,n.yo)({entityId:e,actingBusinessId:s,favorites:t}),d(e=>{let a={...e,actingBusinessId:s};return t&&(a.favoriteAdAccounts={favoriteAdAccountsMap:{...e.favoriteAdAccounts?.favoriteAdAccountsMap||{},[t.actingBusinessId]:{advertiserId:t.adAccounts}}}),a}))},[a]);return(0,t.useEffect)(()=>{a&&e.isAuth&&!r.isReady&&(async()=>{let s=!1;try{let s=await (0,n.SF)({entityId:e.id});d(e=>({...e,...s}))}catch{s=!0}finally{(0,c.nP)("globalAccountSwitcher.getFavoriteAdAccounts",{sampleRate:1,tags:{businessId:e.id,hasError:s}}),d(e=>({...e,isReady:!0}))}})()},[r.isReady,a,e]),{accountSwitcherConfig:r,setConfig:o}};var o=a(354500),_=a(214877),g=a(342513),p=a(96157),A=a(624797),S=a(938927),m=a(441354),E=a(785893);let{Provider:C,useHook:I}=(0,g.Z)("AccountSwitcherContext"),f=e=>e.search&&(0,A.mB)(e.search).advertiserId,N=({children:e})=>{let{checkExperiment:s}=(0,u.F)(),{anyEnabled:a}=s("business_access_assets_and_history_api_v4_migration"),c=(0,r.TH)(),{params:{userBizId:g,businessHierarchyId:A,advertiserId:I,username:N}}=(0,r.$B)(),b=f(c),y=(0,l.Z)(),[T,U]=(0,t.useState)(""),[O,h]=(0,t.useState)(null),[R,$]=(0,t.useState)(!1),[v,D]=(0,t.useState)(null),w=new URLSearchParams(c.search),[L,P]=(0,t.useState)(w.has("actingBusinessId")?null:{id:y.id||"",name:y.fullName||"",img:y.imageMediumUrl||""}),[B,M]=(0,t.useState)(!1),H=(0,i.Z)(),{logContextEvent:Z}=(0,_.v)(),{accountSwitcherConfig:G,setConfig:k}=d();(0,t.useEffect)(()=>{A?U(A):U("")},[A]);let F=(0,t.useCallback)(async({id:e,username:s})=>{let a=await (0,n.bG)({user_id:e,username:s});a&&D({type:e?o.Oz.BUSINESS_ACCOUNT:o.Oz.PROFILE,id:e||a.id,name:a.full_name,img:a.image_medium_url,username:s}),M(!1)},[]),x=(0,m.rc)(N);(0,t.useEffect)(()=>{(0,p.cD)(c)&&v&&x!==N&&N===y.username&&(F({username:y.username}),P({id:y.id||"",name:y.fullName||"",img:y.imageMediumUrl||""}),h({type:o.nt,id:y.id}))},[c,x,F,v,N,y.fullName,y.id,y.imageMediumUrl,y.username]),(0,t.useEffect)(()=>{let e=async({businessId:e,assetId:s})=>{if(!e){M(!1);return}try{let t={asset:{name:""},type:"AD_ACCOUNT"};if(a&&y.isAuth){let{data:{data:e={[s]:t}}={}}=await (0,S.pI)({businessId:y.id,assetIds:[s],resourceType:"AD_ACCOUNT"})||{},{asset:a,type:r}=e[s]||t;D({id:s,name:a.name,img:"",type:r})}else{let{data:{data:{asset:a,type:t}}}=await (0,S.G2)({businessId:e,assetId:s,resourceType:"AD_ACCOUNT",includeAssetSummary:!0});D({id:s,name:a.name,img:"",type:t})}}catch{D({id:y.id||"",name:y.fullName||"",img:y.imageMediumUrl||"",type:o.Oz.BUSINESS_ACCOUNT})}M(!1)},s=async({id:e})=>{let s=await (0,n.p)({hierarchyId:e});D({id:e,name:s?.data?s.data.name:"",img:s?.data?s.data.img_medium_url:"",type:o.Oz.BUSINESS_HIERARCHY}),M(!1)};if(y.isAuth&&H){let a=v&&v.username&&v.username!==N;if((!v||a)&&!B){let a=(0,p.TI)(c)||(0,p.h3)(c),t=I||!!b&&!a;M(!0),A?s({id:A}):g?F({id:g}):(0,p.cD)(c)&&N?F({username:N}):t?e({businessId:y.id,assetId:I||b||""}):v&&v.id===y.id||(D({type:o.Oz.BUSINESS_ACCOUNT,id:y.id||"",name:y.fullName||"",img:y.imageMediumUrl||""}),M(!1))}}},[v,y,A,g,N,I,b,L,H,c,F,B,a]);let z=(0,t.useMemo)(()=>({activePanel:O,selectedHierarchyId:T,switcherOpen:R,openAccountSwitcher:()=>{if(Z({event_type:101,view_type:608,component:14346}),!O){if((0,p.TI)(c))h({type:o.v8});else{let e=new URLSearchParams(c.search),s=e.get("actingBusinessId");h({type:o.nt,id:s??L?.id})}}$(!0)},closeAccountSwitcher:()=>$(!1),openAssetPanel:e=>{h({type:o.nt,id:e})},closeAssetPanel:()=>{h({type:o.v8})},actingBusiness:L,selectedAccount:v,setSelectedAccount:D,setActingBusiness:P,accountSwitcherConfig:G,setConfig:k}),[O,T,R,L,v,G,k,Z,c]);return(0,E.jsx)(C,{value:z,children:e})}},593882:(e,s,a)=>{a.d(s,{C:()=>m,H:()=>E});var t=a(667294),r=a(552341),i=a(354500),n=a(516018),u=a(29156),l=a(250304),c=a(24691),d=a(342513),o=a(107366),_=a(244413),g=a(149722),p=a(186966),A=a(785893);let{Provider:S,useHook:m}=(0,d.Z)("BusinessHierarchyContext"),E=({children:e})=>{let[s,a]=(0,t.useState)([]),[d,m]=(0,t.useState)(!1),[E,C]=(0,t.useState)(!1),[I,f]=(0,t.useState)({}),[N,b]=(0,t.useState)(null),[y,T]=(0,t.useState)([]),[U,O]=(0,t.useState)({}),h=(0,p.Z)(),R=(0,t.useRef)(h),$=(0,g.Z)(),v=(0,r.Z)(),D=(0,t.useRef)({}),w=(0,t.useCallback)((e,s)=>{let a;s===i.Oz.BUSINESS_HIERARCHY?a=(0,c.Z)(l.Q6.DASHBOARD,"","",e):s===i.Oz.BUSINESS_ACCOUNT&&(a=(0,c.Z)(l.Q6.DASHBOARD,e));let t=(0,_.Z)({site:"www",path:a});(0,u.Z)(t)},[]),L=(0,t.useCallback)(async e=>{if(!v)return[];if(C(!0),D.current[e])return C(!1),D.current[e];{let s=await (0,o.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}}),{data:a}=s.resource_response,t=a&&a.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=i.Oz.USER_ACCOUNT,e))),e))||[],r=/^\d+$/.test(e),u=RegExp(e.toLowerCase(),"g"),l=[];N||b(l=await R.current());let c=N??l,d=c.filter(s=>{if(r)return s.id.includes(e);let a=s.user.full_name.toLowerCase();return a.match(u)}).map(n.IT),_=[...t.map(e=>e.id),...d.map(e=>e.id)],g=r?($.id||"").includes(e):($.fullName||"").toLowerCase().match(u);return $.isAuth&&g&&_.push($.id),D.current[e]=_,C(!1),_}},[v,R,$.id,$.fullName,$.isAuth,N]),{id:P="",username:B="",email:M="",fullName:H="",imageSmallUrl:Z="",imageMediumUrl:G="",isAuth:k}=$,F=async e=>{if((!k||!v||N)&&!e)return;m(!0);let s=[];try{let e=await (0,o.Z)({url:"ads/v4/business_access/business_hierarchies/"}),{data:t}=e.resource_response;s=t&&t.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=i.Oz.USER_ACCOUNT,e))),e))||[],a(s)}catch{a([])}try{let e=[];N||(e=await R.current(),b(e));let a=N??e;T(a.map(n.IT)),O(a.reduce((e,s)=>(e[s.id]=s.business_roles||[],e),{})),f((0,n.WP)({id:P,username:B,email:M,fullName:H,imageSmallUrl:Z,imageMediumUrl:G})),D.current[""]=[...s.map(e=>e.id),...a.map(n.IT).map(e=>e.id),P],m(!1)}catch{m(!1)}},x=(0,t.useCallback)(F,[P,B,M,H,Z,G,k,v,N]),z=(0,t.useCallback)(e=>s.some(s=>s.id===e||s.children.some(s=>s.id===e||s.user.id===e)),[s]),V=(0,t.useCallback)(e=>s.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(s=>!!s&&s.children.some(s=>s.user.id===e)),[s]),Y=(0,t.useMemo)(()=>({businessHierarchies:[...I.id&&!z(I.id)?[I]:[],...s,...y.filter(e=>!z(e.id))],switchAccount:w,searchAccounts:L,loadingAccounts:d,isSearchingAccounts:E,fetchData:x,getParentHierarchyForIdIfExists:V,viewerRolesOfEachEmployer:U}),[s,w,L,y,d,E,I,x,z,V,U]);return(0,A.jsx)(S,{value:Y,children:e})}},516018:(e,s,a)=>{a.d(s,{IT:()=>d,SF:()=>A,Vq:()=>c,WP:()=>o,Yu:()=>p,bG:()=>g,p:()=>_,yo:()=>S});var t=a(216167),r=a(354500),i=a(107366),n=a(288673),u=a(562967),l=a(785893);let c=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,user:{id:e.user.id,entity_type:r.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),d=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:r.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),o=e=>({id:e.id,entity_type:r.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:r.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),_=async({hierarchyId:e})=>{let s=await (0,i.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`});return s.resource_response},g=async({user_id:e,username:s})=>{if(!s&&!e)return null;let a=await t.Z.create("UserResource",{user_id:e,username:s}).callGet(),{resource_response:{data:r}}=a;return r},p=(0,l.jsx)("hr",{style:{borderTop:"1px solid #e9e9e9"}}),A=async({entityId:e})=>{let s=await (0,n.FO)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]),a=s[0];if(!(a&&a.properties))return{};let t=a.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG;return t},S=async({entityId:e,actingBusinessId:s,favorites:a})=>{let t={};(0,u.k)(s)||(t.actingBusinessId=s),a&&(t.favoriteAdAccounts={favoriteAdAccountsMap:{[a.actingBusinessId]:{advertiserId:a.adAccounts}}}),Object.keys(t).length>0&&await (0,n.RM)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:t}}])}},24691:(e,s,a)=>{a.d(s,{Z:()=>i});let t="/business/business-manager/",r="/business/business-hierarchy/",i=(e,s,a,i)=>{switch(e){case"DASHBOARD":return i?`${r}${String(i)}/dashboard/`:`${t}${String(s)}/dashboard/`;case"PEOPLE":return`${t}${String(s)}/employees/`;case"PARTNERS":return`${t}${String(s)}/partners/`;case"AD_ACCOUNTS":return`${t}${String(s)}/ad-accounts/`;case"HISTORY":return`${t}${String(s)}/history/`;case"PEOPLE_DETAIL":return`${t}${String(s)}/employees/${String(a)}/details/`;case"PARTNERS_DETAIL":return`${t}${String(s)}/partners/${String(a)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${t}${String(s)}/shared/${String(a)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${t}${String(s)}/ad-accounts/${String(a)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${t}${String(s)}/ad-accounts/pending/${String(a)}/details/`;case"PEOPLE_INVITES":return`${t}${String(s)}/employees/invites/`;case"PEOPLE_PENDING_TAB":return`${t}${String(s)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${t}${String(s)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${t}${String(s)}/ad-accounts/pending`;case"AD_ACCOUNTS_CEE_MIGRATION":return`${t}${String(s)}/ad-accounts/cee-migration`;case"PARTNERS_INVITE_PAGE":return`${t}${String(s)}/partners/invites/`;case"PARTNERS_REQUEST_PAGE":return`${t}${String(s)}/partners/requests/`;case"PROFILES":return`${t}${String(s)}/profiles/`;case"PROFILES_DETAIL":return`${t}${String(s)}/profiles/${String(a)}/details/`;case"BUSINESS_SECURITY":return`${t}${String(s)}/security/`;case"SUPPORT_TOOL":return`${t}${String(s)}/support/`;case"ASSET_GROUPS":return a?`${t}${String(s)}/asset-groups/?asset_group_id=${String(a)}`:`${t}${String(s)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${t}${String(s)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${r}${String(i)}/hierarchy/`;case"BUSINESS_HIERARCHY_BUSINESS_SECURITY":return`${r}${String(i)}/business_security/`;case"MANAGERS":return`${r}${String(i)}/managers/`;case"AUDIENCES":return`${t}${String(s)}/audiences/`;case"SHARED_TAGS":return`${t}${String(s)}/shared-tags/`;case"CATALOGS":return`${t}${String(s)}/catalogs/`;case"BRAND_SAFETY":return`${t}${String(s)}/brand-safety/`;default:return t}}},317540:(e,s,a)=>{a.d(s,{Z:()=>t});let t={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},186966:(e,s,a)=>{a.d(s,{Z:()=>r});var t=a(107366);function r(){return async()=>{let e=await (0,t.Z)({url:"/ads/v4/business_access/businesses/me/employers/"}),s=e.resource_response?e.resource_response.data:{data:[]};return await Promise.all(s&&s.data||[])}}},665407:(e,s,a)=>{a.d(s,{By:()=>i,di:()=>u,s8:()=>n});var t=a(250304),r=a(107366);let i=async({limit:e,sortBy:s="FULL_NAME",sortDirection:a="ASCENDING",searchBy:i="FULL_NAME",searchTerm:n="",startIndex:u=0})=>{let l=e&&e<t.xX?e:t.xX,c=await (0,r.Z)({url:"ads/v4/business_access/businesses/me/get_pinterest_support_businesses",data:{sort_by:s,sort_ascending:"ASCENDING"===a,search_by:i,search_value:n,start_index:u,page_size:l}});return c.resource_response},n=async e=>{let s=await (0,r.Z)({url:`ads/v4/business_access/businesses/${e}/get_pinterest_support_access`});return s.resource_response},u=async()=>{let e=await (0,r.Z)({url:"ads/v4/pinterest_support_managed_advertisers",data:{add_fields:"advertiser.owner_user()"}});return e.resource_response}},22077:(e,s,a)=>{a.d(s,{A6:()=>i,A9:()=>I,AJ:()=>p,BO:()=>U,Eb:()=>Z,Eq:()=>O,F$:()=>r,H:()=>K,Ht:()=>N,Hv:()=>d,Iu:()=>B,Iv:()=>Q,Ix:()=>k,KW:()=>x,LN:()=>b,Mj:()=>l,Mr:()=>n,NM:()=>t,Pc:()=>G,RX:()=>g,TL:()=>E,VI:()=>Y,ZA:()=>V,ZH:()=>$,Zg:()=>L,_7:()=>S,bH:()=>h,bn:()=>R,c:()=>c,dt:()=>y,eE:()=>u,eZ:()=>v,g:()=>M,gN:()=>q,he:()=>f,iE:()=>m,iQ:()=>w,jP:()=>H,kG:()=>A,kR:()=>o,kS:()=>z,lT:()=>W,nM:()=>T,oq:()=>_,oz:()=>P,rl:()=>F,sC:()=>C,uE:()=>D,y6:()=>j});let t="/product-catalogs/",r="/business/catalogs/",i="/business/catalogs/data-sources/",n="/business/catalogs/product-groups/",u="/business/catalogs/diagnostics/",l="/business/catalogs/diagnosticsv2",c="/business/catalogs/trends",d="/business/catalogs/listings/",o="/business/catalogs/products/",_="/business/catalogs/pins/",g="/business/catalogs/bulk/",p="/business/catalogs/:catalog_id/data-sources/feed-debugger/",A="/business/catalogs/:catalog_id/data-sources/:feed_profile_id/",S="/business/catalogs/:catalog_id/data-sources/:feed_profile_id/detail",m="/business/catalogs/:catalog_id/data-sources/supplemental/:supplemental_feed_profile_id/",E="/business/catalogs/:catalog_id/data-sources/supplemental/:supplemental_feed_profile_id/detail",C="/business/catalogs/:catalog_id/data-sources/:feed_profile_id/workflows/:workflow_id/",I="/business/catalogs/:catalog_id/data-sources/supplemental/:supplemental_feed_profile_id/workflows/:workflow_id/",f="/business/catalogs/:catalog_id/data-sources/:feed_profile_id/workflows/:workflow_id/alert/:event_type_id",N="/business/catalogs/:catalog_id/data-sources/supplemental/:supplemental_feed_profile_id/workflows/:workflow_id/alert/:event_type_id",b="/business/catalogs/:catalog_id/data-sources/",y="/business/catalogs/:catalog_id/data-sources/api/detail",T="/business/catalogs/:catalog_id/data-sources/regions/",U="/business/catalogs/:catalog_id/data-sources/:feed_profile_id/trends/",O="/business/catalogs/:catalog_id/product-groups/edit/:product_group_id/",h="/business/catalogs/:catalog_id/product-groups/create/",R="/business/catalogs/:catalog_id/product-groups/:product_group_id/",$="/business/catalogs/:catalog_id/product-groups/bulk/",v="/business/catalogs/:catalog_id/product-groups/",D="/business/hub/content-manager/",w="/business/catalogs/:catalog_id/listings/",L="/business/catalogs/:catalog_id/products/",P="/business/catalogs/:catalog_id/diagnostics/",B="/business/catalogs/:catalog_id/diagnosticsv2/",M="/business/catalogs/:catalog_id/trends/",H="/business/catalogs/:catalog_id/pins/",Z="/business/catalogs/:catalog_id/bulk/",G=[i,b],k=[n,v],F=[u,P],x=[l,B],z=[c,U],V=[c,M],Y=[d,w],q=[o,L],W=[_,H],j=[g,Z],K="/business/catalogs/product-listings/",Q=[K,"/business/catalogs/:catalog_id/product-listings/"]},939341:(e,s,a)=>{a.d(s,{I:()=>m,a:()=>A});var t=a(667294),r=a(616550),i=a(516018),n=a(700280),u=a(342513),l=a(340523),c=a(149722),d=a(665407),o=a(130371);let _=()=>{let{checkExperiment:e}=(0,l.F)(),s=(0,c.Z)(),a=!!(s.isAuth&&s.isPartner&&e("web_m10n_pin_support_tool").anyEnabled),{state:r,receiveAdAccounts:i}=(0,o.Z)(a),{managedBusinessesMap:n,error:u,fetching:_}=r,g=!!u||n.size>0,p=(0,t.useCallback)(async()=>{let e=await (0,d.di)();i(e?.data??[])},[i]);return(0,t.useEffect)(()=>{g||_||p()},[p,g,_]),n};var g=a(785893);let{Provider:p,useMaybeHook:A}=(0,u.Z)("PinSupportToolContext"),S=()=>{let{search:e}=(0,r.TH)();return(0,t.useMemo)(()=>new URLSearchParams(e),[e])},m=({children:e,viewerAdvertiser:s})=>{let{checkExperiment:a}=(0,l.F)(),r=(0,c.Z)(),u=r.isAuth&&r.isPartner&&a("web_m10n_pin_support_tool").anyEnabled,{state:d,actions:A}=(0,o.Z)(u),m=_(),E=[...m.values()].map(e=>(0,i.Vq)(e)),{sterling_on_steroids_ldap:C}=(0,n.u)(),{activeAdAccount:I,headerVisible:f}=d,N=r.isAuth&&!!C,{changeClient:b,changeAdAccount:y,toggleHeaderVisibility:T}=A;(0,t.useEffect)(()=>{u&&(N&&!f&&T(!0),!N&&f&&T(!1))},[T,N,u,f]);let U=S(),O=U.get("managedClientId"),h=U.get("advertiserId"),R=h||s?.id;(0,t.useEffect)(()=>{O&&R?y(R,O):O&&b(O)},[b,y,O,R]);let $=m.get(I?.clientId||""),v=$?.managedAdAccounts||new Map,D=v.get(I?.adAccountId||""),w=[...m.values()];return(0,g.jsx)(p,{value:{managedBusinesses:w,managedBusinessAccounts:E,headerVisible:d.headerVisible,activeClient:$,activeAdAccount:D,viewerAdvertiser:s,changeClient:b,changeAdAccount:y,toggleHeaderVisibility:T},children:e})}},130371:(e,s,a)=>{a.d(s,{Z:()=>c});var t=a(667294),r=a(573810);let i=e=>{let s=e.map(e=>({id:e.business.id,ownedAndManagedAdAccounts:e.business.ad_account_count,user:e.business.pinterest_support_business,managedAdAccounts:e.advertisers.reduce((e,s)=>e.set(s.id,s),new Map)})),a=[...s].sort(({user:{username:e}},{user:{username:s}})=>e.localeCompare(s)),t=a.map(e=>{let s=e.managedAdAccounts.values(),a=[...s].sort(({name:e},{name:s})=>e.localeCompare(s));return e.managedAdAccounts=a.reduce((e,s)=>e.set(s.id,s),new Map),e}),r=t.reduce((e,s)=>e.set(s.id,s),new Map);return r},n={managedBusinessesMap:new Map,headerVisible:!1,activeAdAccount:{clientId:void 0,adAccountId:void 0},fetching:!1,error:!1},u=(e,s)=>{switch(s.type){case"LOAD_AD_ACCOUNTS":return{...e,managedBusinessesMap:s.payload.managedBusinesses};case"SET_ACTIVE_CLIENT":case"SET_ACTIVE_AD_ACCOUNT":return{...e,activeAdAccount:s.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:s.payload};default:return e}},l=({dispatch:e,isEnabled:s,state:a})=>{let{headerVisible:r}=a,i=(0,t.useCallback)(a=>{s&&e({type:"SET_ACTIVE_CLIENT",payload:{clientId:a,adAccountId:null}})},[s,e]),n=(0,t.useCallback)((a,t)=>{s&&e({type:"SET_ACTIVE_AD_ACCOUNT",payload:{adAccountId:a,clientId:t}})},[s,e]),u=(0,t.useCallback)(a=>{s&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:a??!r})},[s,e,r]);return{changeClient:i,changeAdAccount:n,toggleHeaderVisibility:u}},c=e=>{let[s,a]=(0,t.useReducer)(u,n),c=l({dispatch:a,isEnabled:e,state:s}),{activeAdAccount:d}=s;(0,t.useEffect)(()=>{let e=JSON.parse((0,r.qn)("psToolAdAccount",!1));e&&a({type:"SET_ACTIVE_AD_ACCOUNT",payload:e})},[]),(0,t.useEffect)(()=>{(0,r.Nh)("psToolAdAccount",JSON.stringify(d))},[d]);let o=(0,t.useCallback)(e=>{let s=i(e);a({type:"LOAD_AD_ACCOUNTS",payload:{managedBusinesses:s}})},[a]);return{state:s,actions:c,receiveAdAccounts:o}}},441354:(e,s,a)=>{a.d(s,{XI:()=>r,YZ:()=>n,rc:()=>i,sU:()=>c});var t=a(667294);function r(e){let[s,a]=(0,t.useState)(!1),r=()=>a(!0),i=()=>a(!1);return(0,t.useEffect)(()=>{let{current:s}=e;return s&&(s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",i)),()=>{s&&(s.removeEventListener("mouseenter",r),s.removeEventListener("mouseleave",i))}}),s}let i=e=>{let s=(0,t.useRef)(e);return(0,t.useEffect)(()=>{s.current=e}),s.current};function n(){let e=(0,t.useRef)(!0);return(0,t.useEffect)(()=>{e.current=!1},[]),e.current}function u(e,s){return Object.is(e,s)}let l=Symbol("pre-initial value");function c(e,{equal:s=u,delta:a}={equal:u}){let r=(0,t.useRef)(l),i=r.current;return(0,t.useEffect)(()=>{r.current=e}),{previousValue:i,changed:i===l||!s(i,e),delta:a?.(i,e)}}},983983:(e,s,a)=>{a.d(s,{L1:()=>i,Rz:()=>l,WZ:()=>n,cI:()=>r,fe:()=>u,hu:()=>t});let t=64,r=80,i=22,n="HeaderContent",u=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/28098-5197d500bb98583f.mjs.map